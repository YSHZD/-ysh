<!DOCTYPE html>

<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="referrer" content="always">
<meta http-equiv="X-UA-Compatible" content="IE=7">
<title>小学一年级语文课程全指导</title>
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="./css/iconfont.css" type="text/css" rel="stylesheet">
<link rel="stylesheet" href="./css/mui.min.css">
<link href="./css/base.css" type="text/css" rel="stylesheet">
<link href="//at.alicdn.com/t/font_408343_c070gwu3gawwb3xr.css" type="text/css" rel="stylesheet">
<style >

</style>
</head>
<body class="bgf gad">
<div class="header">
    <div class="left back">
        <i class="iconfont icon-fanhui"></i>
    </div>
    <div class="center">
        <p>小学一年级语文课程全指导</p>
    </div>
    <div class="right head_color">
        <a href="personcenter.html"><i class="iconfont icon-gerenzhongxin"></i></a>
    </div>
</div>
<div class="live_move">
    <img src="images/move.jpg">
</div>
<div class="live_head">
    <div class="live_head_top">小学一年级语文课程全指导<span> <i class="iconfont icon-xing"></i></span></div>
    <p>84人已预约</p>
    <p class="live_price">价格￥9999.00</p>
    <p>上课时间：2017.11.05 20:00</p>
    <span class="live_go1">添加评论</span>
</div>
<div class="live_content">
    <div class="live_content_head double_live">
        <div class="live_content_ac">课程详情</div>
        <div>相关视频</div>
        <div>相关评论</div>
    </div>
    <div class="live_content_main">
        <div class="live_content_introduce">
            <div class="live_introduce_box">
                <h3><span>课程目录</span></h3>
                <div class="live_introduce_txt courese_live_list" id="one">
                  <div id="pullrefresh" class="mui-content mui-scroll-wrapper">
                      <div class="mui-scroll">
                          <ul class="mui-table-view mui-table-view-chevron">
                          </ul>
                      </div>
                  </div>
                </div>
            </div>
            <div class="live_introduce_box">
                <h3><span>课程简介</span></h3>
                <div class="live_introduce_txt">
                    <p>学习对象</p>
                    <p>阿萨德或付多军扩撒付或扩军多撒付或军所多卡或军扩扩扩扩扩扩扩扩扩扩扩</p>
                    <p>学习对象</p>
                    <p>阿萨德或付多军扩撒付或扩军多撒付或军所多卡或军扩扩扩扩扩扩扩扩扩扩扩</p>
                </div>
            </div>
            <div class="live_introduce_box">
                <h3><span>老师简介</span></h3>
                <div class="live_introduce_txt">
                    <p>学习对象</p>
                    <p>阿萨德或付多军扩撒付或扩军多撒付或军所多卡或军扩扩扩扩扩扩扩扩扩扩扩</p>
                    <p>学习对象</p>
                    <p>阿萨德或付多军扩撒付或扩军多撒付或军所多卡或军扩扩扩扩扩扩扩扩扩扩扩</p>
                </div>
            </div>
            <div class="live_introduce_help">课程咨询</div>
        </div>
        <div class="live_content_moive">
            <div class="live_content_moive_box">
              <div>
                <img src="images/move.jpg">
                <h3>老师直播测试课saflehwqrjheqrjewkqhjr</h3>
              </div>
            </div>
            <div class="live_content_moive_box">
              <div>
                <img src="images/move.jpg">
                <h3>老师直播测试课</h3>
              </div>
            </div>
            <div class="live_content_moive_box">
              <div>
                <img src="images/move.jpg">
                <h3>老师直播测试课</h3>
              </div>
            </div>
        </div>
        <div class="live_content_comment" id="two">
            <!--下拉刷新容器-->
            <div id="pullrefresh" class="mui-content mui-scroll-wrapper">
                <div class="mui-scroll">
                    <!-- 数据列表 -->
                    <ul class="mui-table-view mui-table-view-chevron">
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="live_content_going">
    <div class="go_comment live_help"><span class="no_comment">x</span>
        <div class="go_comment_star">
            <div class="go_comment_star_left"><span>*</span>评分:</div>
            <div class="go_comment_star_right">
                <span> <i class="iconfont icon-xing"></i></span>
                <span> <i class="iconfont icon-xing"></i></span>
                <span> <i class="iconfont icon-xing"></i></span>
                <span> <i class="iconfont icon-xing"></i></span>
                <span> <i class="iconfont icon-xing"></i></span>
            </div>
        </div>
        <p class="go_comment_head"><span>*</span>发表点评</p>
       <div style="position: relative;">
        <textarea name="comment" class="go_comment_detail"></textarea>
        <span class="textCount" style="position: absolute;bottom:24px;right:10px;color:#808080">5</span>
        </div>
        <div class="go_comment_overed"><span onclick="go_comment()">提交</span></div>
    </div>
</div>
<div style="height:50px"></div>
<div class="shop_add">
  <a href="shopping.html"><div class="shop_add1"><i class="iconfont icon-shangpincaozuolan02"></i><span class="shopnum">0</span></div></a>
  <div class="shop_add2" onclick="addshop()">加入购物车</div>
  <a href=""><div class="shop_add3">立即预约</div></a>
</div>
</body>
<script src="./js/jquery-1.8.2.js" language="javascript"></script>
<script src="./js/mui.min.js"></script>
<script src="./js/mui.pullToRefresh.js"></script>
<script src="./js/base.js" language="javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    $(".textCount").html(249);
    $(".go_comment_detail").keydown(function(){
        var curLength=$(".go_comment_detail").val().length;  console.log(curLength) ; 
        if(curLength>=249){
            var num=$(".go_comment_detail").val().substr(0,249);
            $(".go_comment_detail").val(num);
        }
        else{
            $(".textCount").html(249-curLength);
        }
    })
})
$('.no_comment').on('click',function(){
  $('.live_content_going').hide();
});
mui.init();
    (function($) {
      //阻尼系数
      var deceleration = mui.os.ios?0.003:0.0009;
      $('.mui-scroll-wrapper').scroll({
        bounce: false,
        indicators: true, //是否显示滚动条
       // deceleration:deceleration
      });
      $.ready(function() {
        //循环初始化所有下拉刷新，上拉加载。
        $.each(document.querySelectorAll('.live_content_main .mui-scroll'), function(index, pullRefreshEl) {
          $(pullRefreshEl).pullToRefresh({
            down: {
              callback: function() {
                var self = this;
                setTimeout(function() {
                  var ul = self.element.querySelector('.mui-table-view');
                  ul.insertBefore(createFragment(ul, index, 5, true), ul.firstChild);
                  self.endPullDownToRefresh();
                }, 1000);
              },
              auto:true
            },
            up: {
              callback: function() {
                var self = this;
                setTimeout(function() {
                  var ul = self.element.querySelector('.mui-table-view');
                  ul.appendChild(createFragment(ul, index, 5));
                  self.endPullUpToRefresh();
                }, 1000);
              },
               auto:true
            }
          }); 
        });
        var createFragment = function(ul, index, count, reverse) { if(reverse){alert(1)}
          var length = ul.querySelectorAll('li').length;
          var fragment = document.createDocumentFragment();
          var li;
            if(index==0){
               var new_order=[{"title":"小学一年级语文课程全指导",'url':'...'},{"title":"小学一年级语文课程全指导",'url':'...'},{"title":"小学一年级语文课程全指导",'url':'...'},{"title":"小学一年级语文课程全指导",'url':'...'},{"title":"小学一年级语文课程全指导",'url':'...'},{"title":"小学一年级语文课程全指导",'url':'...'}];
               var max=new_order.length;
               for(var i = 0, len =5; i < len; i++){
                li = document.createElement('li');
                li.className = 'mui-table-view-cell';
                li.innerHTML ='<div class="courese_live_list_box">\
                                  '+new_order[i].title+'(第 '+SectionToChinese(i+1)+' 节)<a href="'+new_order[i].url+'"><span class="play"><img \src="images/play.jpg"></span></a>\
                              </div>';
                fragment.appendChild(li);
                }
            var height=document.querySelectorAll('#one ul')[0].offsetHeight;
            var height1=document.querySelectorAll('#one')[0].offsetHeight;
            var addheight=0;
            if(document.querySelectorAll('#one ul li')[0]){
              addheight=document.querySelectorAll('#one ul li')[0].offsetHeight;
            }
            var max = Math.max(height,height1)+addheight;
  
           document.querySelectorAll('#one')[0].style.height=max+20+'px';

            }else if(index==1){
              var new_order=[{"img":"images/default.jpg",'live_star':1,'time':'2017.12.12','txt':'问世间情为何物qwdhfdsaflkdsahfjkdsahjk了三大框大架安好风景看第三方的撒防守打法第三方啊第三方！！！'},{"img":"images/default.jpg",'live_star':2,'time':'2017.12.12','txt':'问世间情为何物！！！'},{"img":"images/default.jpg",'live_star':3,'time':'2017.12.12','txt':'问世间情为何物！！！'},{"img":"images/default.jpg",'live_star':4,'time':'2017.12.12','txt':'问世间情为何物！！！'},{"img":"images/default.jpg",'live_star':5,'time':'2017.12.12','txt':'问世间情为何物！！！'},{"img":"images/default.jpg",'live_star':3,'time':'2017.12.12','txt':'问世间情为何物！！！'},{"img":"images/default.jpg",'live_star':1,'time':'2017.12.12','txt':'问世间情为何物！！！'},{"img":"images/default.jpg",'live_star':2,'time':'2017.12.12','txt':'问世间情为何物！！！'},{"img":"images/default.jpg",'live_star':3,'time':'2017.12.12','txt':'问世间情为何物！！！'},{"img":"images/default.jpg",'live_star':4,'time':'2017.12.12','txt':'问世间情为何物！！！'},{"img":"images/default.jpg",'live_star':5,'time':'2017.12.12','txt':'问世间情为何物！！！'},{"img":"images/default.jpg",'live_star':3,'time':'2017.12.12','txt':'问世间情为何物！！！'}];
              function star(key){
                  var str="";
                  var len=5-key;
                  for(var j=0;j<key;j++){
                      str+='<span class="ac"> <i class="iconfont icon-xing"></i></span>';
                  }
                  for(var i=0;i<len;i++){
                      str+='<span> <i class="iconfont icon-xing"></i></span>';
                  }
                  return str;
             }
               for(var i = 0, len =count; i < len; i++){
                li = document.createElement('li');
                li.className = 'mui-table-view-cell';
                li.innerHTML ='<div class="live_comment_box">\
                                    <div class="live_comment_left"><img src="'+new_order[i].img+'"></div>\
                                    <div class="live_comment_center">\
                                        <div class="live_comment_here">\
                                            <p class="live_comment_here_title">\
                                            评分'+star(new_order[i].live_star)+'</p>\
                                            <p>'+new_order[i].txt+'</p>\
                                        </div>\
                                        <div class="live_comment_right">'+new_order[i].time+'</div>\
                                    </div>\
                                </div>';
                fragment.appendChild(li);
                } 
                if( document.querySelectorAll('#two')[0].style.display=='block'){
                   var height=document.querySelectorAll('#two ul')[0].offsetHeight;
                  var height1=document.querySelectorAll('#two')[0].offsetHeight;
                  var addheight=0;
                  if(document.querySelectorAll('#two li')[0]){
                  addheight=document.querySelectorAll('#two ul li')[0].offsetHeight;
                  }
                  console.log(document.querySelectorAll('#two')[0].offsetHeight);
                  var max = Math.max(height,height1)+addheight;console.log(max);console.log(Math.max(height,height1))

                  document.querySelectorAll('.live_content_comment')[0].style.height=max+20+'px';
                }
            //document.querySelectorAll('#two')[0].style.display='block';
           
            }
          return fragment;
        };
      });
    })(mui);
function SectionToChinese(section){ 
  var chnNumChar = ["零","一","二","三","四","五","六","七","八","九"];
  var chnUnitChar = ["","十","百","千"];
  var strIns = '', chnStr = '';  
  var unitPos = 0;  
  var zero = true;  
  while(section > 0){    
    var v = section % 10;    
    if(v === 0){      
      if(!zero){        
        zero = true;        
        chnStr = chnNumChar[v] + chnStr;      
      }    
    }else{      
      zero = false;      
      strIns = chnNumChar[v];     
       strIns += chnUnitChar[unitPos];      
       chnStr = strIns + chnStr;    
     }    
     unitPos++;    
     section = Math.floor(section / 10);  
   }  
   return chnStr;
 }

   
/*评论验证及提交*/
function go_comment(){
    var key1=$('.go_comment_star_right').eq(0).find($('.ac')).length;
    var result=0;
    if(key1==0){
        mui.alert('评分不能为空', '友情提示', function() {    
                });
        result=1;
    }
    if(result==0&&!trim($('.go_comment_detail')[0].value)){
        mui.alert('点评不能为空', '友情提示', function() {    
                });
        result=1;
    }
    if(result==0){
        mui.alert('提交成功', '友情提示', function() { 
             console.log('评分',key1);
            console.log($('.go_comment_detail')[0].value);
            $('.live_content_going').slideUp();
        }); 
    }
    }

function trim(str){
    return str.replace(/(^\s*)|(\s*$)/g,"");
}

    
/*切换效果 收藏*/
    $(function(){
        $('.live_go1').on('click',function(){
            $('.live_content_going').slideDown();
        })
        $('.go_comment_star_right span').on('click',function(){
            var index=$(this).index()+1;
            $('.go_comment_star_right span').removeClass('ac');
            for(var i=0;i<index;i++){
              $('.go_comment_star_right span').eq(i).addClass('ac');
            }  
        });
        $('.live_head_top span').on('click',function(){
            if(!$('.live_head_top span').hasClass('live_active')){
                    mui.alert('确定收藏？', '友情提示', function() { 
                  $('.live_head_top span').addClass('live_active');
                  console.log('确定收藏？')
                }); 
            }else{
                mui.alert('确定取消收藏？', '友情提示', function() { 
                      $('.live_head_top span').removeClass('live_active');
                      console.log('确定取消收藏？')
                });
            }  
        });  
        $('.live_content_head div').on('click',function(){
            var key=$(this).index();
            if(key==0){
                $('.live_content_comment').hide();
                $('.live_content_introduce').show();
                $('.live_content_moive').hide();
                // go1();

            }else if(key==1){
                $('.live_content_comment').hide();
                $('.live_content_introduce').hide();
                $('.live_content_moive').show();
            }else{
                $('.live_content_comment').show();
                $('.live_content_introduce').hide();
                $('.live_content_moive').hide();
                // go();
                  
            }
            $(this).siblings().removeClass('live_content_ac').end().addClass('live_content_ac');
        })  
    });
</script>
</html>