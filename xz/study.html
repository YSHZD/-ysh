<!DOCTYPE html>

<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="referrer" content="always">
<meta http-equiv="X-UA-Compatible" content="IE=7">
<title>语数外课程</title>
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link href="./css/iconfont.css" type="text/css" rel="stylesheet">
<link href="./css/mui.min.css" type="text/css" rel="stylesheet">
<link rel="stylesheet" href="./dist/mescroll.min.css">
<link href="./css/base.css" type="text/css" rel="stylesheet">
<style >
* {
	margin: 0;
	padding: 0;
	-webkit-touch-callout:none;
	-webkit-user-select:none;
	-webkit-tap-highlight-color:transparent;
}
body{background-color: white}
ul{list-style-type: none}
a {text-decoration: none;color: #18B4FE;}
.mescroll{
	position: fixed;
	top: 0;
	bottom: 65px;
	width: 100%;
	height: auto;
}
.s_box{display: flex;padding:0.1rem 0.15rem;height:1rem;border-bottom:0.01rem solid #ededed;}
.s_box .left{display: flex;justify-content: center;align-items: center;}
.s_box .left img{max-width:0.98rem;max-height:0.98rem;}
.s_box .center{flex:1;padding:0 0.1rem;text-align: left;justify-content: center;display:flex;flex-direction: column;}
.s_box .center p{color: #333333;
    font-size: 14px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    text-align: left;}
.s_box .center strong{
	color: #14a4ed;
    font-size: 0.18rem;
    display: inline-block;
    margin: 0.06rem auto;
    text-align: left;
}
.s_box .right{width:0.7rem;display: flex;justify-content: flex-end;align-items:flex-end;}
.s_box .right span{color: #fff;
    font-size: 0.12rem;
    background-color: #EE703B;
    display: inline-block;
    padding: 0.06rem 0.11rem;
    border-radius: 0.05rem;}
.nav-sticky {
    z-index: 9999;
    position: -webkit-sticky;
    position: sticky;
    top: 0;
</style>
</head>
<body>
<div id="mescroll" class="mescroll">
	<!--模拟的轮播-->
	<div class="study_header">
		<img src="images/go1.jpg"/>
	</div>
	<!--
		悬浮菜单:
		1.ios的悬停效果,通过给navWarp添加sticky样式来实现
		2.android和pc端悬停效果,通过监听mescroll的scroll事件,控制navContent是否为fixed定位来实现
	-->
	<div class="study_menu" id="navWarp">
	<ul id="navContent" class="nav">
		<li class="study_menu_ac" i="0">
			<span>阶段</span>
			<div class="study_menu_sm" style="height:auto;">	
			</div>
		</li>
		<li i="1">
			<span>年级</span>
			<div class="study_menu_sm1">
				
			</div>
		</li>
		<li i="2">
			<span>科目</span>
			<div class="study_menu_sm2">
				
			</div>
		</li>
	</ul>
</div>
	<!--upscrollWarp用于装载上拉进度和数据列表,避免清空列表不满屏,导致点击悬浮菜单时会滑下来-->
	<div id="upscrollWarp">
		<!--展示上拉加载的数据列表-->
		<ul id="dataList" class="data-list">
			<!-- <li>
				<div class="s_box">
					<div class="left"><img src="images/go1.jpg"></div>   
					<div class="center"> 
						<p>测试11-17</p>
						<p><strong>1.00</strong></p>
					</div> 
					<div class="right">
						<span class="study_buttom">立即预约</span>
					</div>
				</div>
			</li> -->
		</ul>
	</div>
</div>
<!-- header-bar
<div class="study_header">
	<img src=""/>
</div>
menu
<div class="study_menu">
	<ul>
		<li class="study_menu_ac">
			<span>阶段</span>
			<div class="study_menu_sm" style="height:auto;">	
			</div>
		</li>
		<li>
			<span>年级</span>
			<div class="study_menu_sm1">
				
			</div>
		</li>
		<li>
			<span>科目</span>
			<div class="study_menu_sm2">
				
			</div>
		</li>
	</ul>
</div>
<div class="study_content" style="position: absolute;top:220px;bottom:65px;width:100%;">
	下拉刷新容器
	<div id="pullrefresh" class="mui-content mui-scroll-wrapper">
		<div class="mui-scroll">
			数据列表
			<ul class="mui-table-view mui-table-view-chevron addClass">
				
			</ul>
			 <p class="nomore" style="">没有更多数据</p>
		</div>
	</div>
	
</div>

<div class="kong"></div> -->
<!-- footer -->
<div class="footer">
	<div class="left">
		<p><a href="tel:12345"/><i class="iconfont icon-bohao"></i></a></p>
		<p>一键拨号</p>
	</div>
	<div class="center">
		<p><a href="index.html"><i class="iconfont icon-cloud-home"></i></a></p>
		<p>主页</p>
	</div>
	<div class="right">
		<p><i class="iconfont icon-duanxin"></i></p>
		<p>售后服务</p>
	</div>
</div>
</body>
<script src="./js/jquery-1.8.2.js" language="javascript"></script>
<script src="./js/mui.min.js"></script>
<!-- <script src="./js/base.js" language="javascript"></script>
<script src="./js/study.js" language="javascript"></script> -->
<script src="./dist/mescroll.min.js" type="text/javascript" charset="utf-8"></script>
<script>
$(function(){
			//创建MeScroll对象,内部已默认开启下拉刷新,自动执行up.callback,刷新列表数据;
			var mescroll = new MeScroll("mescroll", {
				up: {
					callback: getListData, //上拉回调,此处可简写; 相当于 callback: function (page, mescroll) { getListData(page); }
					isBounce: false, //此处禁止ios回弹,解析(务必认真阅读,特别是最后一点): http://www.mescroll.com/qa.html#q10
					clearEmptyId: "dataList", //相当于同时设置了clearId和empty.warpId; 简化写法;
					warpId: "upscrollWarp" ,//让上拉进度装到upscrollWarp里面
					toTop:{ //配置回到顶部按钮
						src : "./dist/mescroll-totop.png", //默认滚动到1000px显示,可配置offset修改
						//offset : 1000
					}
				}
			});
			
			var navWarp=document.getElementById("navWarp");
			if(mescroll.os.ios){
				//ios的悬停效果,通过给navWarp添加nav-sticky样式来实现
				navWarp.classList.add("nav-sticky");
			}else{
				//android和pc端悬停效果,通过监听mescroll的scroll事件,控制navContent是否为fixed定位来实现
				navWarp.style.height=navWarp.offsetHeight+"px";//固定高度占位,避免悬浮时列表抖动
				var navContent=document.getElementById("navContent");
				mescroll.optUp.onScroll=function(mescroll, y, isUp){
					console.log("up --> onScroll 列表当前滚动的距离 y = " + y + ", 是否向上滑动 isUp = " + isUp);
					if(y>=navWarp.offsetTop){
						navContent.classList.add("nav-fixed");
					}else{
						navContent.classList.remove("nav-fixed");
					}
				}
			}
			
			/*初始化菜单*/
			var pdType=0;//全部商品0; 奶粉1; 图书2;
			$(".navWarp li").click(function(){alert(1);
				var i=$(this).attr("i");
				if(pdType!=i) {
					//更改列表条件
					pdType=i;
					//变色
					$(".nav p").each(function(i,dom){
						if(dom.getAttribute("i")==pdType){
							dom.classList.add("study_menu_ac");
						}else{
							dom.classList.remove("study_menu_ac");
						}
					})
					/*调整upscrollWarp的最小高度,使其刚好满屏,避免点击悬浮菜单时会滑下来;(这里每次点击都计算一次,毕竟轮播图高度改变或未能显示图都会影响计算的值)*/
					var minHight = mescroll.getClientHeight() - navWarp.offsetHeight;
					document.getElementById("upscrollWarp").style.minHeight = minHight+"px";
					//重置列表数据
					mescroll.resetUpScroll();
				}
			})
			
			/*联网加载列表数据  page = {num:1, size:10}; num:当前页 从1开始, size:每页数据条数 */
			function getListData(page){
				//联网加载数据
				getListDataFromNet(pdType, page.num, page.size, function(curPageData){
					//联网成功的回调,隐藏下拉刷新和上拉加载的状态;
					//mescroll会根据传的参数,自动判断列表如果无任何数据,则提示空;列表无下一页数据,则提示无更多数据;
					console.log("pdType="+pdType+", page.num="+page.num+", page.size="+page.size+", curPageData.length="+curPageData.length);
					
					//方法一(推荐): 后台接口有返回列表的总页数 totalPage
					//mescroll.endByPage(curPageData.length, totalPage); //必传参数(当前页的数据个数, 总页数)
					
					//方法二(推荐): 后台接口有返回列表的总数据量 totalSize
					//mescroll.endBySize(curPageData.length, totalSize); //必传参数(当前页的数据个数, 总数据量)
					
					//方法三(推荐): 您有其他方式知道是否有下一页 hasNext
					//mescroll.endSuccess(curPageData.length, hasNext); //必传参数(当前页的数据个数, 是否有下一页true/false)
					
					//方法四 (不推荐),会存在一个小问题:比如列表共有20条数据,每页加载10条,共2页.如果只根据当前页的数据个数判断,则需翻到第三页才会知道无更多数据,如果传了hasNext,则翻到第二页即可显示无更多数据.
					mescroll.endSuccess(curPageData.length);
					
					//设置列表数据
					setListData(curPageData);
				}, function(){
					//联网失败的回调,隐藏下拉刷新和上拉加载的状态;
	                mescroll.endErr();
				});
			}
			
			/*设置列表数据*/
			function setListData(curPageData){
				var listDom=document.getElementById("dataList");
				var str = "";
				// for (var i = 0; i < curPageData.length; i++) {
				// 	var pd=curPageData[i];
					
				// 	var str='<img class="pd-img" src="'+pd.pdImg+'"/>';
				// 	str+='<p class="pd-name">'+pd.pdName+'</p>';
				// 	str+='<p class="pd-price">'+pd.pdPrice+' 元</p>';
				// 	str+='<p class="pd-sold">已售'+pd.pdSold+'件</p>';
				// 	var liDom=document.createElement("li");
				// 	liDom.innerHTML=str;
				// 	listDom.appendChild(liDom);
				// }
				str+=`<div class="s_box">
					<div class="left"><img src="images/go1.jpg"></div>   
					<div class="center"> 
						<p>测试11-17</p>
						<p><strong>1.00</strong></p>
					</div> 
					<div class="right">
						<span class="study_buttom">立即预约</span>
					</div>
				</div>`;
					var liDom=document.createElement("li");
					liDom.innerHTML=str;
					listDom.appendChild(liDom);
			}
			
			/*联网加载列表数据
			 在您的实际项目中,请参考官方写法: http://www.mescroll.com/api.html#tagUpCallback
			 请忽略getListDataFromNet的逻辑,这里仅仅是在本地模拟分页数据,本地演示用
			 实际项目以您服务器接口返回的数据为准,无需本地处理分页.
			 * */
			function getListDataFromNet(pdType,pageNum,pageSize,successCallback,errorCallback) {
				console.log(11111111111111);
				setListData('curPageData')
                	$.ajax({
		                type: 'GET',
		                url:'http://test.aimeichuang.com/Mobile/Curriculum/get_course_list_ajax.html?p='+pageNum+'&cate_id=1',
		                dataType: 'JSONP',
		                success: function(data){
		                	console.log(data);
		      //           	var listData=[];
		                	
		      //           	//pdType 全部商品0; 奶粉1; 图书2;
		      //           	if(pdType==0){
		      //           		//全部商品 (模拟分页数据)
								// for (var i = (pageNum-1)*pageSize; i < pageNum*pageSize; i++) {
				    //         		if(i==data.length) break;
				    //         		listData.push(data[i]);
				    //         	}
								
		      //           	}else if(pdType==1){
		      //           		//奶粉
		      //           		for (var i = 0; i < data.length; i++) {
		      //           			if (data[i].pdName.indexOf("奶")!=-1) {
		      //           				listData.push(data[i]);
		      //           			}
		      //           		}
		                		
		      //           	}else if(pdType==2){
		      //           		//面膜
		      //           		for (var i = 0; i < data.length; i++) {
		      //           			if (data[i].pdName.indexOf("面膜")!=-1) {
		      //           				listData.push(data[i]);
		      //           			}
		      //           		}
		      //           	}
		                	
		                	//回调
		                	successCallback(listData);
		                },
		                error: errorCallback
		            });
			}
			
		});
</script>
<script>
(function(doc, win) {
  var docEl = doc.documentElement,
    resizeEvt = 'orientationchange' in win ? 'orientationchange' : 'resize',
    recalc = function() {
      var clientWidth = docEl.clientWidth;
      if(!clientWidth) return;
      docEl.style.fontSize = 200 * (clientWidth / 750) + 'px';
    };
  if(!doc.addEventListener) return;
  win.addEventListener(resizeEvt, recalc, false);
  doc.addEventListener('DOMContentLoaded', recalc, false);
})(document, window)
</script>
</html>